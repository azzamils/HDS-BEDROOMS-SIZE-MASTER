<!DOCTYPE html>
<html>
<head>
    <title>HDS Bedrooms Master</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; background: #6b77ad; color: #f8fafc; padding: 10px; margin: 0; }
        .card { max-width: 500px; margin: 5px auto; background: #5a6594; border-radius: 12px; padding: 20px; border: 2px solid #e0b0d5; box-shadow: 0 10px 15px rgba(0,0,0,0.3); }
        .logo-box { text-align: center; margin-bottom: 10px; }
        .logo-box img { max-width: 80px; height: auto; border-radius: 50%; border: 2px solid #e0b0d5; }
        h1 { color: #e0b0d5; text-align: center; margin: 0 0 15px 0; font-size: 1.2rem; letter-spacing: 2px; }
        
        .mode-selector { background: #4a5481; padding: 12px; border-radius: 8px; margin-bottom: 15px; border: 1px dashed #e0b0d5; }
        .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px; }
        label { display: block; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; text-transform: uppercase; font-weight: bold; }
        input, select { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #e0b0d5; background: #4a5481; color: white; font-size: 1rem; box-sizing: border-box; }
        
        .calc-btn { width: 100%; padding: 18px; background: #e0b0d5; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; color: #4a5481; font-size: 1.2rem; margin-top: 15px; display: block; }
        .clear-btn { width: 100%; background: #4a5481; color: #e0b0d5; border: 1px solid #e0b0d5; margin-top: 10px; padding: 10px; font-size: 0.9rem; border-radius: 6px; cursor: pointer; }

        .result-area { background: #4a5481; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 6px solid #e0b0d5; display: none; }
        .section-head { color: #e0b0d5; font-size: 0.85rem; font-weight: bold; margin: 15px 0 5px 0; text-transform: uppercase; border-bottom: 1px solid #5a6594; }
        .spec-line { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #5a6594; }
        .val { font-weight: bold; color: #fff; font-size: 1.2rem; font-family: monospace; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="card">
    <div class="logo-box">
        <img src="logo.png" alt="HDS Logo" onerror="this.style.display='none'">
    </div>
    <h1>HDS BEDROOMS</h1>
    
    <div class="mode-selector">
        <label>Step 1: Choose Mode</label>
        <select id="calcMode" onchange="toggleMode()">
            <option value="system">Full Opening (Equal Doors)</option>
            <option value="single">Single Door (Custom Size)</option>
        </select>
    </div>

    <div id="systemInputs">
        <div class="input-group">
            <div><label>Opening Width</label><input type="number" id="sysW" placeholder="mm"></div>
            <div><label>Opening Height</label><input type="number" id="sysH" placeholder="mm"></div>
        </div>
        <label>Number of Doors</label>
        <select id="qty">
            <option value="2">2 Doors</option>
            <option value="3">3 Doors</option>
            <option value="4" selected>4 Doors</option>
        </select>
    </div>

    <div id="singleInputs" class="hidden">
        <label>Custom Door Size (FDS)</label>
        <div class="input-group">
            <div><label>Width</label><input type="number" id="customW" placeholder="mm"></div>
            <div><label>Height</label><input type="number" id="customH" placeholder="mm"></div>
        </div>
    </div>

    <div style="margin-top:15px;">
        <div class="input-group">
            <div>
                <label>Metal Range</label>
                <select id="range">
                    <option value="harris">Harris</option>
                    <option value="colquhoun">Colquhoun</option>
                    <option value="darroch">Darroch</option>
                </select>
            </div>
            <div>
                <label>Design Split</label>
                <select id="design">
                    <option value="1">Full Panel</option>
                    <option value="2">1/2 Split</option>
                    <option value="3">1/3 Split</option>
                </select>
            </div>
        </div>
    </div>
    
    <button class="calc-btn" onclick="calculate()">GET CUT LIST</button>
    <button class="clear-btn" onclick="resetForm()">RESET FORM</button>

    <div id="res" class="result-area">
        <div class="spec-line"><span>FDS Size:</span> <span class="val" id="fdsOut" style="color:#e0b0d5"></span></div>
        <div class="section-head">Metal</div>
        <div class="spec-line"><span>W x H:</span> <span class="val" id="metOut"></span></div>
        <div id="infillResults"></div>
    </div>
</div>

<script>
function toggleMode() {
    const mode = document.getElementById('calcMode').value;
    document.getElementById('systemInputs').classList.toggle('hidden', mode === 'single');
    document.getElementById('singleInputs').classList.toggle('hidden', mode === 'system');
}

function calculate() {
    const mode = document.getElementById('calcMode').value;
    let fdsW, fdsH;

    if(mode === 'system') {
        let w = parseFloat(document.getElementById('sysW').value);
        let h = parseFloat(document.getElementById('sysH').value);
        let q = parseInt(document.getElementById('qty').value);
        if(!w || !h) { alert("Enter Opening Width and Height"); return; }
        fdsW = Math.floor((w + ((q - 1) * 30)) / q);
        fdsH = h - 45;
    } else {
        fdsW = parseFloat(document.getElementById('customW').value);
        fdsH = parseFloat(document.getElementById('customH').value);
        if(!fdsW || !fdsH) { alert("Enter FDS Width and Height"); return; }
    }

    let range = document.getElementById('range').value;
    let design = parseInt(document.getElementById('design').value);
    
    // Metal Logic
    let railDed = (range === 'colquhoun') ? 62 : (range === 'darroch' ? 60 : 58);
    let metW = fdsW - railDed;
    
    document.getElementById('fdsOut').innerText = fdsW + " x " + fdsH + "mm";
    document.getElementById('metOut').innerText = metW + "(W) x " + fdsH + "(H)mm";

    // Infill Logic
    let glassW = fdsW - 23;
    let panelW = fdsW - 30;
    let totalWorkingH = fdsH - 52 - ((design - 1) * 10);
    let splitH = Math.floor(totalWorkingH / design);

    let html = `<div class="section-head">Infill (${design} Panels)</div>`;
    if(design === 1) {
        html += `<div class="spec-line"><span>Glass:</span> <span class="val">${glassW} x ${fdsH - 52}mm</span></div>`;
        html += `<div class="spec-line"><span>Panel:</span> <span class="val">${panelW} x ${fdsH - 62}mm</span></div>`;
    } else {
        html += `<div class="spec-line"><span>Glass (ea):</span> <span class="val">${glassW} x ${splitH}mm</span></div>`;
        html += `<div class="spec-line"><span>Panel (ea):</span> <span class="val">${panelW} x ${splitH - 10}mm</span></div>`;
    }

    document.getElementById('infillResults').innerHTML = html;
    document.getElementById('res').style.display = 'block';
    document.getElementById('res').scrollIntoView({ behavior: 'smooth' });
}

function resetForm() {
    location.reload();
}
</script>
</body>
</html>
